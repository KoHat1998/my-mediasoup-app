<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Broadcast â€¢ KoHat Live</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="/style.css" />
</head>
<body>
  <header class="header">
    <a href="/" class="brand">ðŸŽ¥ KoHat Live</a>
    <div class="actions">
      <!-- send users to /login; server will redirect to the right channel after auth -->
      <a class="btn big" href="/login">Start Broadcasting</a>
      <a class="btn big ghost" href="/viewer.html">Watch Live</a>
    </div>
  </header>

  <main class="main">
    <section class="card">
      <h2 style="margin-top:0">Broadcaster <small id="who" style="opacity:.85; font-weight:600"></small></h2>

      <div class="badges">
        <span id="liveBadge" class="badge">OFFLINE</span>
        <span id="uptime" class="badge">00:00:00</span>
        <span id="vc" class="badge">ðŸ‘€ 0</span>
      </div>

      <div id="skel" class="skel" style="margin:12px 0;"></div>
      <video id="local" autoplay muted playsinline style="display:none"></video>

      <div class="controls" style="margin-top:12px; justify-content:center; flex-wrap:wrap; gap:10px">
        <button id="go" class="btn big">Go Live (Camera)</button>
        <button id="share" class="btn big">Share Screen</button>
        <button id="stop" class="btn big ghost">Stop</button>
        <button id="toggleMic" class="btn ghost">Mute Mic</button>
        <button id="toggleCam" class="btn ghost">Disable Cam</button>
        <button id="end" class="btn ghost">End Stream</button>
      </div>

      <p id="status" style="margin-top:8px; opacity:.85; text-align:center"></p>
    </section>
  </main>

  <footer class="footer">
    <small>Â© 2025 KoHat Live</small>
    <nav>
      <a href="#">Terms</a>
      <a href="#">Privacy</a>
      <a href="#">Contact</a>
    </nav>
  </footer>

  <div id="toast" class="toast"></div>

  <script src="/socket.io/socket.io.js"></script>
  <script type="module" src="/broadcaster.js"></script>

  <!-- Tiny helper to show which channel this page controls -->
  <script>
    (function(){
      const q = new URLSearchParams(location.search).get('ch');
      const who = document.getElementById('who');
      if (who) who.textContent = q === 'b1' ? '(Broadcaster 1)' : (q === 'b2' ? '(Broadcaster 2)' : '');
    })();
  </script>
</body>
</html>
