<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Live Now • Livenix</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Match neon dark theme -->
  <meta name="theme-color" content="#0D0F16" />
  <link rel="stylesheet" href="/style.css" />
  <link rel="icon" href="/favicon.ico" />
</head>
<body>
  <!-- Header -->
  <header class="header" role="banner">
    <a href="/lives.html" class="brand" aria-label="Livenix home">
      <!-- Shows if present; hides itself if missing -->
      <img src="/assets/livenix_logo.png" alt="Livenix logo" style="height:26px;margin-right:8px">
      Livenix
    </a>

    <div class="actions" aria-label="Primary actions">
      <button id="refresh" class="btn ghost" aria-label="Refresh lives">Refresh</button>
      <button id="create" class="btn" aria-label="Start a live">Go Live</button>
      <span id="userEmail" class="small" style="opacity:.85"></span>
      <button id="signout" class="btn" aria-label="Sign out">Sign out</button>
    </div>
  </header>

  <!-- Main -->
  <main class="main" role="main">
    <section class="card" style="max-width:1100px;margin:0 auto;">
      <div style="display:flex;align-items:center;gap:12px;flex-wrap:wrap;margin-bottom:12px">
        <h1 style="margin:0;font-size:1.6rem;line-height:1">Live now</h1>
        <span id="hint" class="small">Browse streams or start your own.</span>

        <!-- Search / sort -->
        <div style="margin-left:auto;display:flex;gap:8px;align-items:center">
          <input id="search" class="input" type="search" placeholder="Search lives…" aria-label="Search lives" />
          <select id="sort" aria-label="Sort lives">
            <option value="recent">Most recent</option>
            <option value="title">Title A–Z</option>
          </select>
        </div>
      </div>

      <!-- Live cards grid -->
      <div id="list" class="grid cards" aria-live="polite"></div>

      <!-- Empty state -->
      <div id="empty" class="empty" style="display:none">
        <p style="margin:0 0 12px">No live streams right now.</p>
        <a class="btn" href="#" id="linkGoLive">Go live</a>
      </div>
    </section>
  </main>

  <!-- (Footer removed for app feel) -->

  <!-- Logic -->
  <script type="module" src="/lives.js"></script>
  <script>
    // Optional wiring to lives.js hooks (safe if not present)
    (function () {
      const search = document.getElementById('search');
      const sort = document.getElementById('sort');
      if (search) search.addEventListener('input', () => window.livenixFilter?.(search.value.trim()));
      if (sort) sort.addEventListener('change', () => window.livenixSort?.(sort.value));
      window.livenixSetVisibility = (hasItems) => {
        const list = document.getElementById('list');
        const empty = document.getElementById('empty');
        if (!list || !empty) return;
        empty.style.display = hasItems ? 'none' : 'block';
      };
    })();
  </script>
</body>
</html>